# ⏱️ Измерение времени ранжирования комментариев

## Описание

Добавлена система измерения времени обработки комментариев в процессе ранжирования. Измеряется только время ранжирования, исключая время скачивания комментариев и генерации summary.

## Компоненты с измерением времени

### 1. `process_video.py` - Основной пайплайн
- Измеряет время в методе `process_video()`
- Сохраняет время в атрибуте `self.ranking_duration`
- Отображает время в итоговых результатах

### 2. `gemini_ranker.py` - Gemini ранжирование
- Измеряет время в методе `rank_comments_for_video()`
- Учитывает все варианты обработки (мега-запрос, батчи, fallback)

### 3. `comment_ranker.py` - Эвристическое ранжирование
- Измеряет время в методе `rank_comments_for_video()`
- Показывает производительность эвристического алгоритма

### 4. `multi_key_gemini_ranker.py` - Мультиключевое ранжирование
- Измеряет время для мега-запросов и батчевой обработки
- Показывает эффективность параллельной обработки

## Формат вывода

```
⏱️ ВРЕМЯ РАНЖИРОВАНИЯ: 15.43 секунд
```

## Где отображается время

1. **Во время обработки** - сразу после завершения ранжирования
2. **В итоговых результатах** - в блоке "РЕЗУЛЬТАТЫ ОБРАБОТКИ"

## Пример использования

### Через основной пайплайн:
```bash
docker-compose run --rm comments-downloader python process_video.py "https://www.youtube.com/watch?v=VIDEO_ID"
```

### Тестирование измерения времени:
```bash
docker-compose run --rm comments-downloader python test_timing.py
```

### Прямое ранжирование:
```bash
docker-compose run --rm comments-downloader python comment_ranker.py VIDEO_ID
```

## Технические детали

- **Точность**: 2 знака после запятой
- **Единицы**: секунды
- **Охват**: только процесс ранжирования
- **Исключения**: скачивание комментариев, получение транскриптов, генерация summary

## Анализ производительности

Время ранжирования зависит от:
- Количества комментариев
- Выбранного метода ранжирования (Gemini vs эвристика)
- Доступности API ключей
- Лимитов API

### Ожидаемые времена:
- **Эвристическое ранжирование**: 0.1-2 секунды на 100 комментариев
- **Gemini ранжирование**: 5-30 секунд на 100 комментариев
- **Мультиключевое ранжирование**: 2-10 секунд на 100 комментариев

## Мониторинг

Время ранжирования позволяет:
- Оценить производительность системы
- Сравнить эффективность разных методов
- Выявить узкие места в обработке
- Планировать ресурсы для больших объемов данных 